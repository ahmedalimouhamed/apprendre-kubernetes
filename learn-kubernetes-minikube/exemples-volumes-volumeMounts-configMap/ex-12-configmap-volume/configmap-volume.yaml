apiVersion: v1
kind: ConfigMap
metadata:
  name: app-config
data:
  application.properties: |
    server.port=8081
    app.name=MyApplication
    database.host=postgresql
    cache.enabled=true
    log.level=INFO

  application.yml: |
    server:
      port: 8081
      name: MyApp
    database:
      host: "postgresql-server"
      port: 5432
    features:
      cache: true
      analytics: false

  startup.sh: |
    #!/bin/bash
    echo "Starting application with config ..."
    java-jar /app/app.jar --spring.config.location=/etc/config/

  config.json: |
    {
      "app": {
        "name": "MyApp",
        "version": "1.0.0"
      },
      "services": {
        "database": {
          "url": "jdbc:postgresql://postgresql:5432/mydb"
        }
      }
    }

---
apiVersion: v1
kind: Pod
metadata:
  name: configmap-volume-example
spec:
  containers:
    - name: config-container
      image: busybox
      command: ["sh", "-c", "echo 'config files are mountrd at /etc/config' && ls -la /etc/config/ && sleep 3600"]
      volumeMounts:
        - name: config-volume
          mountPath: /etc/config
          readOnly: true
  volumes:
    - name: config-volume
      configMap:
        name: app-config
        defaultMode: 0644
